{"version":3,"sources":["clAdapters/clMockAdapter.js"],"names":[],"mappings":"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","file":"clAdapters/clMockAdapter.js","sourcesContent":["'use strict';\r\n\r\nvar util = require('util'),\r\n  BaseAdapter = require('./base/Adapter'),\r\n  Fields = require('./fields');\r\n\r\n/**\r\n * CLMockAdapter\r\n *\r\n * `credentials` should always be:\r\n * ```\r\n * {\r\n *   appId: '123456',\r\n *   apiKey: '999999'\r\n * }\r\n * ```\r\n * @class\r\n * @return {ClMockAdapter}\r\n */\r\nvar CLMockAdapter = module.exports = function CLMockAdapter() {\r\n  BaseAdapter.call(this);\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  Object.defineProperty(this, 'extEntityKey', {\r\n    get: function() {\r\n      return this.credentials.appId;\r\n    }\r\n  });\r\n};\r\n\r\nutil.inherits(CLMockAdapter, BaseAdapter);\r\n\r\n/**\r\n * @override\r\n */\r\nCLMockAdapter.prototype.init = function() {\r\n  var _this = this;\r\n  var p = new Promise(function(resolve, reject) {\r\n    if (_this.credentials.appId === '123456' && _this.credentials.apiKey === '999999') {\r\n      resolve(_this);\r\n    } else {\r\n      reject('Wrong credentials, please use appId \"123456\" and apiKey \"999999\"');\r\n    }\r\n  });\r\n\r\n  return p;\r\n};\r\n\r\n/**\r\n * Reflects given field in this `result` format:\r\n * ```\r\n * {\r\n *   {fieldType}ExtId: rand # between 1-50,\r\n *   {extId}: Float (0-1.0)\r\n * }\r\n * ```\r\n *\r\n * For example, for a \"Fields.Types.USER\" field w/extId 'user#utilizationRate', would return:\r\n * ```\r\n * {\r\n *   userExtId: 50,\r\n *   'user#utilizationRate': 0.55\r\n * }\r\n * ```\r\n *\r\n * Returns between 0-50 results in pages of `query.limit` (default 5)\r\n * @override\r\n */\r\nCLMockAdapter.prototype.getFieldData = function(field, query) {\r\n  query = query || {};\r\n  var typeName;\r\n  console.log(field);\r\n  switch (field.type) {\r\n    case Fields.Types.USER:\r\n      typeName = 'user';\r\n      break;\r\n    case Fields.Types.GROUP:\r\n      typeName = 'group';\r\n      break;\r\n    default:\r\n      typeName = 'unknown';\r\n      break;\r\n  }\r\n\r\n  var skip = query.skip || 0;\r\n  if (!skip) {\r\n    this.numResultsToGenerate = Math.floor(Math.random() * 50);\r\n    console.log('CLMockAdapter: Generating %d results', this.numResultsToGenerate);\r\n  }\r\n\r\n  var result = {\r\n    count: this.numResultsToGenerate,\r\n    results: []\r\n  };\r\n\r\n  var createResult = function() {\r\n    var r = {};\r\n    r[typeName + 'ExtId'] = Math.floor(Math.random() * 3) + 1;\r\n    r[field.extId] = Math.random();\r\n    return r;\r\n  };\r\n\r\n  var pageSize = query.limit || 5;\r\n  var resultsToReturn = Math.min(pageSize, this.numResultsToGenerate - skip);\r\n  for (var i = 0; i < resultsToReturn; i++) {\r\n    result.results.push(createResult());\r\n  }\r\n\r\n  return new Promise(function(resolve /*,reject*/ ) {\r\n    resolve(result);\r\n  });\r\n};\r\n"],"sourceRoot":"/source/"}