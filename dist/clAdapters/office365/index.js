'use strict';

var _Promise = require('babel-runtime/core-js/promise')['default'];

var uuid = require('node-uuid');
var crypto = require('crypto');
var rp = require('request-promise');
var util = require('util');
var BaseAdapter = require('../base/Adapter');
var Office365 = require('./office365-js.js');
var moment = require('moment');

/**
 * Office365Adapter
 *
 * @class
 * @return {Office365Adapter}
 */
var Office365Adapter = module.exports = function Office365Adapter() {
  BaseAdapter.call(this);
};

util.inherits(Office365Adapter, BaseAdapter);

/**
 * @override
 */
Office365Adapter.prototype.init = function () {
  var _this = this;
  this._config = new Office365.Configuration(this.credentials);
  this._service = new Office365.Service(this._config);
  return this._service.init().then(function () /*client*/{
    var msg = 'Successfully initialized Office365 for email: %s';
    console.log(msg, _this.credentials.email);
    return _this;
  });
};

/**
 * @override
 */
Office365Adapter.prototype.reset = function () {
  delete this._config;
  delete this._service;
};

var getUserEmails = function getUserEmails(apiVersion, email, filterStartDate, filterEndDate, additionalFields, result, token, pageToGet) {
  var recordsPerPage = 25;
  var maxPages = 20;
  pageToGet = pageToGet || 1;
  var skip = (pageToGet - 1) * recordsPerPage + 1;
  var emailRequestOptions = {
    method: 'GET',
    uri: 'https://outlook.office365.com/api/v' + apiVersion + '/users(\'' + email + '\')/messages?$top=' + recordsPerPage + '&$skip=' + skip + '&$filter=IsDraft eq false and DateTimeSent ge ' + filterStartDate.toISOString().substring(0, 10) + ' and DateTimeSent lt ' + filterEndDate.toISOString().substring(0, 10) + '&$select=Id,Categories,DateTimeCreated,Subject,Importance,HasAttachments,ParentFolderId,From,Sender,ToRecipients,CcRecipients,BccRecipients,ReplyTo,ConversationId,DateTimeReceived,DateTimeSent,IsDeliveryReceiptRequested,IsReadReceiptRequested,IsRead' + additionalFields,
    headers: {
      Authorization: 'Bearer ' + token,
      Accept: 'application/json;odata.metadata=none'
    }
  };
  return rp(emailRequestOptions).then(function (body) {
    result.success = true;
    var parsedBody = JSON.parse(body);

    if (parsedBody && pageToGet === 1) {
      result.data = parsedBody;
    } else if (parsedBody.value && pageToGet > 1) {
      result.data.value = result.data.value.concat(parsedBody.value);
    }

    if (parsedBody && parsedBody.value.length === recordsPerPage && pageToGet <= maxPages) {
      return getUserEmails(apiVersion, email, filterStartDate, filterEndDate, additionalFields, result, token, pageToGet + 1);
    } else {
      return true;
    }
  })['catch'](function (err) {
    result.success = false;
    if (err.name === 'StatusCodeError') {
      var entireMessage = err.message;
      var messageJson = entireMessage.replace(err.statusCode + ' - ', '');
      var messageData = JSON.parse(messageJson.replace(new RegExp('\\"', 'g'), '"'));
      result.errorMessage = messageData.error.message;
    } else {
      result.errorMessage = JSON.stringify(err);
    }
    return true;
  });
};

var getAccessToken = function getAccessToken(apiVersion, clientId, tenantId, certThumbprint, privateKey) {
  var tokenRequestUrl = 'https://login.microsoftonline.com/' + tenantId + '/oauth2/token?api-version=' + apiVersion;

  var jwtHeader = {
    'alg': 'RS256',
    'x5t': certThumbprint
  };

  var jwtPayload = {
    'aud': tokenRequestUrl,
    'exp': new Date().getTime() / 1000 + 360000, // add X hours
    'iss': clientId,
    'jti': uuid.v4(),
    'nbf': new Date().getTime() / 1000 - 360000, // add -X hours
    'sub': clientId
  };

  var encodedJwtHeader = new Buffer(JSON.stringify(jwtHeader)).toString('base64');
  var encodedJwtPayload = new Buffer(JSON.stringify(jwtPayload)).toString('base64');
  var stringToSign = encodedJwtHeader + '.' + encodedJwtPayload;

  //sign it!
  var signer = crypto.createSign('RSA-SHA256');
  signer.update(stringToSign);
  var encodedSignedJwtInfo = signer.sign(privateKey, 'base64');

  //define assertion
  var clientAssertion = encodedJwtHeader + '.' + encodedJwtPayload + '.' + encodedSignedJwtInfo;

  var tokenRequestFormData = {
    client_id: clientId,
    client_assertion_type: 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer',
    grant_type: 'client_credentials',
    resource: 'https://outlook.office365.com/',
    client_assertion: clientAssertion
  };

  var tokenRequestOptions = {
    method: 'POST',
    port: 443,
    uri: tokenRequestUrl,
    formData: tokenRequestFormData
  };

  return rp(tokenRequestOptions).then(function (body) {
    var tokenData = JSON.parse(body);
    if (tokenData && tokenData.access_token) {
      var accessToken = tokenData.access_token;
      return accessToken;
    } else {
      return _Promise.reject('Could not get access token.');
    }
  })['catch'](function (err) {
    var tokenData = JSON.parse(JSON.stringify(err));
    if (tokenData.name === 'StatusCodeError') {
      var entireMessage = tokenData.message;
      var messageJson = entireMessage.replace(tokenData.statusCode + ' - ', '');
      var messageData = JSON.parse(messageJson.replace(new RegExp('\\"', 'g'), '"'));
      //console.log('-----');
      //console.log(messageData);
      return _Promise.reject(messageData);
    } else {
      return _Promise.reject(err);
    }
  });
};

var extractDataFromEmailMessage = function extractDataFromEmailMessage(emailMessage, mapping) {
  if (mapping === '') {
    return '';
  } else if (mapping.indexOf('.') === -1) {
    return emailMessage[mapping];
  } else {
    //drill into object to grab the value we need
    var nestedPropertyArray = mapping.split('.');
    var returnVal = emailMessage[nestedPropertyArray[0]];
    if (returnVal) {
      for (var i = 1; i < nestedPropertyArray.length; i++) {
        returnVal = returnVal[nestedPropertyArray[i]];
        if (!returnVal) {
          return returnVal;
        }
      }
    }
    return returnVal;
  }
};

var mapEmailData = function mapEmailData(emailData) {
  var mapping = {
    'emails': 'value',
    'messageId': 'Id',
    'conversationId': 'ConversationId',
    'dateTimeSent': 'DateTimeSent',
    'dateTimeReceived': 'DateTimeReceived',
    'importance': 'Importance',
    'folderId': 'ParentFolderId',
    'folderName': '',
    'categories': 'Categories',
    'contentType': 'Body.ContentType',
    'subject': 'Subject',
    'bodyPreview': 'BodyPreview',
    'body': 'Body.Content',
    'fromAddress': 'From.EmailAddress.Address',
    'fromName': 'From.EmailAddress.Name',
    'toRecipients': 'ToRecipients',
    'toRecipientAddress': 'EmailAddress.Address',
    'toRecipientName': 'EmailAddress.Name',
    'ccRecipients': 'CcRecipients',
    'ccRecipientAddress': 'EmailAddress.Address',
    'ccRecipientName': 'EmailAddress.Name',
    'bccRecipients': 'BccRecipients',
    'bccRecipientAddress': 'EmailAddress.Address',
    'bccRecipientName': 'EmailAddress.Name',
    'isDeliveryReceiptRequested': 'IsDeliveryReceiptRequested',
    'isReadReceiptRequested': 'IsReadReceiptRequested',
    'hasAttachments': 'HasAttachments',
    'isDraft': 'IsDraft',
    'isRead': 'IsRead'
  };

  var mappedData = [];

  for (var userIter = 0; userIter < emailData.length; userIter++) {
    var mappedUser = {
      email: emailData[userIter].email,
      filterStartDate: emailData[userIter].filterStartDate,
      filterEndDate: emailData[userIter].filterEndDate,
      data: [],
      success: emailData[userIter].success,
      errorMessage: emailData[userIter].errorMessage
    };

    if (emailData[userIter].success) {
      for (var i = 0; i < emailData[userIter].data[mapping.emails].length; i++) {
        var originalEmailMessage = emailData[userIter].data[mapping.emails][i];
        var mappedEmailMessage = {};

        //get top-level scalars
        mappedEmailMessage.messageId = extractDataFromEmailMessage(originalEmailMessage, mapping.messageId);
        mappedEmailMessage.conversationId = extractDataFromEmailMessage(originalEmailMessage, mapping.conversationId);
        mappedEmailMessage.dateTimeSent = new Date(extractDataFromEmailMessage(originalEmailMessage, mapping.dateTimeSent));
        mappedEmailMessage.dateTimeReceived = new Date(extractDataFromEmailMessage(originalEmailMessage, mapping.dateTimeReceived));
        mappedEmailMessage.importance = extractDataFromEmailMessage(originalEmailMessage, mapping.importance);
        mappedEmailMessage.folderId = extractDataFromEmailMessage(originalEmailMessage, mapping.folderId);
        //mappedEmailMessage.folderName = extractDataFromEmailMessage(originalEmailMessage, mapping.folderName);
        mappedEmailMessage.categories = extractDataFromEmailMessage(originalEmailMessage, mapping.categories);
        mappedEmailMessage.contentType = extractDataFromEmailMessage(originalEmailMessage, mapping.contentType);
        mappedEmailMessage.subject = extractDataFromEmailMessage(originalEmailMessage, mapping.subject);
        mappedEmailMessage.bodyPreview = extractDataFromEmailMessage(originalEmailMessage, mapping.bodyPreview);
        mappedEmailMessage.body = extractDataFromEmailMessage(originalEmailMessage, mapping.body);
        mappedEmailMessage.isDeliveryReceiptRequested = extractDataFromEmailMessage(originalEmailMessage, mapping.isDeliveryReceiptRequested);
        mappedEmailMessage.isReadReceiptRequested = extractDataFromEmailMessage(originalEmailMessage, mapping.isReadReceiptRequested);
        mappedEmailMessage.hasAttachments = extractDataFromEmailMessage(originalEmailMessage, mapping.hasAttachments);
        mappedEmailMessage.isDraft = extractDataFromEmailMessage(originalEmailMessage, mapping.isDraft);
        mappedEmailMessage.isRead = extractDataFromEmailMessage(originalEmailMessage, mapping.isRead);

        mappedEmailMessage.fromAddress = extractDataFromEmailMessage(originalEmailMessage, mapping.fromAddress);
        mappedEmailMessage.fromName = extractDataFromEmailMessage(originalEmailMessage, mapping.fromName);

        //get arrays
        var j = 0;

        //to
        mappedEmailMessage.toRecipients = [];
        for (j = 0; j < originalEmailMessage[mapping.toRecipients].length; j++) {
          mappedEmailMessage.toRecipients.push({
            address: extractDataFromEmailMessage(originalEmailMessage[mapping.toRecipients][j], mapping.toRecipientAddress),
            name: extractDataFromEmailMessage(originalEmailMessage[mapping.toRecipients][j], mapping.toRecipientName)
          });
        }

        //cc
        mappedEmailMessage.ccRecipients = [];
        for (j = 0; j < originalEmailMessage[mapping.ccRecipients].length; j++) {
          mappedEmailMessage.ccRecipients.push({
            address: extractDataFromEmailMessage(originalEmailMessage[mapping.ccRecipients][j], mapping.ccRecipientAddress),
            name: extractDataFromEmailMessage(originalEmailMessage[mapping.ccRecipients][j], mapping.ccRecipientName)
          });
        }

        //bcc
        mappedEmailMessage.bccRecipients = [];
        for (j = 0; j < originalEmailMessage[mapping.bccRecipients].length; j++) {
          mappedEmailMessage.bccRecipients.push({
            address: extractDataFromEmailMessage(originalEmailMessage[mapping.bccRecipients][j], mapping.bccRecipientAddress),
            name: extractDataFromEmailMessage(originalEmailMessage[mapping.bccRecipients][j], mapping.bccRecipientName)
          });
        }

        mappedUser.data.push(mappedEmailMessage);
      }
    }
    mappedData.push(mappedUser);
  }

  return mappedData;
};

var getEmailData = function getEmailData(apiVersion, emails, filterStartDate, filterEndDate, additionalFields, clientId, tenantId, certThumbprint, privateKey) {
  return getAccessToken(apiVersion, clientId, tenantId, certThumbprint, privateKey).then(function (accessToken) {
    var emailResults = [];
    var emailResultPromises = [];
    var emailIter = 0;
    for (emailIter = 0; emailIter < emails.length; emailIter++) {
      emailResults[emailIter] = { email: emails[emailIter], filterStartDate: filterStartDate, filterEndDate: filterEndDate };
      emailResultPromises.push(getUserEmails(apiVersion, emails[emailIter], filterStartDate, filterEndDate, additionalFields, emailResults[emailIter], accessToken));
    }

    return _Promise.all(emailResultPromises).then(function () {
      return emailResults;
    });
  });
};

Office365Adapter.prototype.getBatchData = function (emails, filterStartDate, filterEndDate, additionalFields) {
  var clientId = this._config.credentials.clientId;
  var tenantId = this._config.credentials.tenantId;
  var certThumbprint = this._config.credentials.certificateThumbprint;
  var privateKey = this._config.credentials.certificate;
  var apiVersion = this._config.options.apiVersion;

  var dataAdapterRunStats = {
    success: true,
    runDate: moment().utc().toDate(),
    filterStartDate: filterStartDate,
    filterEndDate: filterEndDate,
    emails: emails
  };

  return getEmailData(apiVersion, emails, filterStartDate, filterEndDate, additionalFields, clientId, tenantId, certThumbprint, privateKey).then(function (emailData) {
    return mapEmailData(emailData);
  }).then(function (mappedEmailData) {
    dataAdapterRunStats.results = mappedEmailData;
    return dataAdapterRunStats;
  })['catch'](function (err) {
    dataAdapterRunStats.success = false;
    dataAdapterRunStats.errorMessage = err;
    console.log('Office365 GetBatchData Error: ' + JSON.stringify(err));
    return dataAdapterRunStats;
  });
};

Office365Adapter.prototype.runConnectionTest = function (connectionData) {
  var _this = this;
  _this._config = new Office365.Configuration(connectionData.credentials);
  var filterStartDate = moment().utc().startOf('day').add(-1, 'days').toDate();
  var filterEndDate = moment().utc().startOf('day').toDate();
  return _this.getBatchData([_this._config.credentials.email], filterStartDate, filterEndDate, '').then(function (data) {
    if (data.success && data.results[0]) {
      //to see if it really worked, we need to pass in the first result
      return data.results[0];
    } else {
      return data;
    }
  });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsQWRhcHRlcnMvb2ZmaWNlMzY1L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUViLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoQyxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDcEMsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNCLElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQzdDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzdDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7Ozs7Ozs7QUFRL0IsSUFBSSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsZ0JBQWdCLEdBQUc7QUFDbEUsYUFBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUN4QixDQUFDOztBQUVGLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsV0FBVyxDQUFDLENBQUM7Ozs7O0FBSzdDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsWUFBVztBQUMzQyxNQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7QUFDakIsTUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzdELE1BQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNwRCxTQUFPLElBQUksQ0FBQyxRQUFRLENBQ2pCLElBQUksRUFBRSxDQUNOLElBQUksQ0FBQyxzQkFBdUI7QUFDM0IsUUFB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QWRhcHRlcnMvb2ZmaWNlMzY1L2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXVpZCA9IHJlcXVpcmUoJ25vZGUtdXVpZCcpO1xudmFyIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xudmFyIHJwID0gcmVxdWlyZSgncmVxdWVzdC1wcm9taXNlJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbnZhciBCYXNlQWRhcHRlciA9IHJlcXVpcmUoJy4uL2Jhc2UvQWRhcHRlcicpO1xudmFyIE9mZmljZTM2NSA9IHJlcXVpcmUoJy4vb2ZmaWNlMzY1LWpzLmpzJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbi8qKlxuICogT2ZmaWNlMzY1QWRhcHRlclxuICpcbiAqIEBjbGFzc1xuICogQHJldHVybiB7T2ZmaWNlMzY1QWRhcHRlcn1cbiAqL1xudmFyIE9mZmljZTM2NUFkYXB0ZXIgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIE9mZmljZTM2NUFkYXB0ZXIoKSB7XG4gIEJhc2VBZGFwdGVyLmNhbGwodGhpcyk7XG59O1xuXG51dGlsLmluaGVyaXRzKE9mZmljZTM2NUFkYXB0ZXIsIEJhc2VBZGFwdGVyKTtcblxuLyoqXG4gKiBAb3ZlcnJpZGVcbiAqL1xuT2ZmaWNlMzY1QWRhcHRlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB0aGlzLl9jb25maWcgPSBuZXcgT2ZmaWNlMzY1LkNvbmZpZ3VyYXRpb24odGhpcy5jcmVkZW50aWFscyk7XG4gIHRoaXMuX3NlcnZpY2UgPSBuZXcgT2ZmaWNlMzY1LlNlcnZpY2UodGhpcy5fY29uZmlnKTtcbiAgcmV0dXJuIHRoaXMuX3NlcnZpY2VcbiAgICAuaW5pdCgpXG4gICAgLnRoZW4oZnVuY3Rpb24oIC8qY2xpZW50Ki8gKSB7XG4gICAgICB2YXIgbXNnID0gJ1N1Y2Nlc3NmdWxseSBpbml0aWFsaXplZCBPZmZpY2UzNjUgZm9yIGVtYWlsOiAlcyc7XG4gICAgICBjb25zb2xlLmxvZyhtc2csIF90aGlzLmNyZWRlbnRpYWxzLmVtYWlsKTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQG92ZXJyaWRlXG4gKi9cbk9mZmljZTM2NUFkYXB0ZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gIGRlbGV0ZSB0aGlzLl9jb25maWc7XG4gIGRlbGV0ZSB0aGlzLl9zZXJ2aWNlO1xufTtcblxudmFyIGdldFVzZXJFbWFpbHMgPSBmdW5jdGlvbihhcGlWZXJzaW9uLCBlbWFpbCwgZmlsdGVyU3RhcnREYXRlLCBmaWx0ZXJFbmREYXRlLCBhZGRpdGlvbmFsRmllbGRzLCByZXN1bHQsIHRva2VuLCBwYWdlVG9HZXQpIHtcbiAgdmFyIHJlY29yZHNQZXJQYWdlID0gMjU7XG4gIHZhciBtYXhQYWdlcyA9IDIwO1xuICBwYWdlVG9HZXQgPSBwYWdlVG9HZXQgfHwgMTtcbiAgdmFyIHNraXAgPSAoKHBhZ2VUb0dldCAtMSkgKiByZWNvcmRzUGVyUGFnZSkgKyAxO1xuICB2YXIgZW1haWxSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVyaTogJ2h0dHBzOi8vb3V0bG9vay5vZmZpY2UzNjUuY29tL2FwaS92JyArIGFwaVZlcnNpb24gKyAnL3VzZXJzKFxcJycgKyBlbWFpbCArICdcXCcpL21lc3NhZ2VzPyR0b3A9JyArIHJlY29yZHNQZXJQYWdlICsgJyYkc2tpcD0nICsgc2tpcCArICcmJGZpbHRlcj1Jc0RyYWZ0IGVxIGZhbHNlIGFuZCBEYXRlVGltZVNlbnQgZ2UgJyArIGZpbHRlclN0YXJ0RGF0ZS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCkgKyAnIGFuZCBEYXRlVGltZVNlbnQgbHQgJyArIGZpbHRlckVuZERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApICsgJyYkc2VsZWN0PUlkLENhdGVnb3JpZXMsRGF0ZVRpbWVDcmVhdGVkLFN1YmplY3QsSW1wb3J0YW5jZSxIYXNBdHRhY2htZW50cyxQYXJlbnRGb2xkZXJJZCxGcm9tLFNlbmRlcixUb1JlY2lwaWVudHMsQ2NSZWNpcGllbnRzLEJjY1JlY2lwaWVudHMsUmVwbHlUbyxDb252ZXJzYXRpb25JZCxEYXRlVGltZVJlY2VpdmVkLERhdGVUaW1lU2VudCxJc0RlbGl2ZXJ5UmVjZWlwdFJlcXVlc3RlZCxJc1JlYWRSZWNlaXB0UmVxdWVzdGVkLElzUmVhZCcgKyBhZGRpdGlvbmFsRmllbGRzLFxuICAgIGhlYWRlcnMgOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyB0b2tlbixcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb247b2RhdGEubWV0YWRhdGE9bm9uZSdcbiAgICB9XG4gIH07XG4gIHJldHVybiBycChlbWFpbFJlcXVlc3RPcHRpb25zKVxuICAudGhlbihmdW5jdGlvbihib2R5KSB7XG4gICAgcmVzdWx0LnN1Y2Nlc3MgPSB0cnVlO1xuICAgIHZhciBwYXJzZWRCb2R5ID0gSlNPTi5wYXJzZShib2R5KTtcblxuICAgIGlmIChwYXJzZWRCb2R5ICYmIHBhZ2VUb0dldCA9PT0gMSkge1xuICAgICAgcmVzdWx0LmRhdGEgPSBwYXJzZWRCb2R5O1xuICAgIH0gZWxzZSBpZiAocGFyc2VkQm9keS52YWx1ZSAmJiBwYWdlVG9HZXQgPiAxKSB7XG4gICAgICByZXN1bHQuZGF0YS52YWx1ZSA9IHJlc3VsdC5kYXRhLnZhbHVlLmNvbmNhdChwYXJzZWRCb2R5LnZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAocGFyc2VkQm9keSAmJiBwYXJzZWRCb2R5LnZhbHVlLmxlbmd0aCA9PT0gcmVjb3Jkc1BlclBhZ2UgJiYgcGFnZVRvR2V0IDw9IG1heFBhZ2VzKSB7XG4gICAgICByZXR1cm4gZ2V0VXNlckVtYWlscyhhcGlWZXJzaW9uLCBlbWFpbCwgZmlsdGVyU3RhcnREYXRlLCBmaWx0ZXJFbmREYXRlLCBhZGRpdGlvbmFsRmllbGRzLCByZXN1bHQsIHRva2VuLCBwYWdlVG9HZXQgKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KVxuICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgcmVzdWx0LnN1Y2Nlc3MgPSBmYWxzZTtcbiAgICBpZiAoZXJyLm5hbWUgPT09ICdTdGF0dXNDb2RlRXJyb3InKSB7XG4gICAgICB2YXIgZW50aXJlTWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgdmFyIG1lc3NhZ2VKc29uID0gZW50aXJlTWVzc2FnZS5yZXBsYWNlKGVyci5zdGF0dXNDb2RlICsgJyAtICcsICcnKTtcbiAgICAgIHZhciBtZXNzYWdlRGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZUpzb24ucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcXCInLCAnZycpLCdcIicpKTtcbiAgICAgIHJlc3VsdC5lcnJvck1lc3NhZ2UgPSBtZXNzYWdlRGF0YS5lcnJvci5tZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuZXJyb3JNZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoZXJyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufTtcblxudmFyIGdldEFjY2Vzc1Rva2VuID0gZnVuY3Rpb24oYXBpVmVyc2lvbiwgY2xpZW50SWQsIHRlbmFudElkLCBjZXJ0VGh1bWJwcmludCwgcHJpdmF0ZUtleSkge1xuICB2YXIgdG9rZW5SZXF1ZXN0VXJsID0gJ2h0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS8nICsgdGVuYW50SWQgKyAnL29hdXRoMi90b2tlbj9hcGktdmVyc2lvbj0nICsgYXBpVmVyc2lvbjtcblxuICB2YXIgand0SGVhZGVyID0ge1xuICAgICdhbGcnOiAnUlMyNTYnLFxuICAgICd4NXQnOiBjZXJ0VGh1bWJwcmludFxuICB9O1xuXG4gIHZhciBqd3RQYXlsb2FkID0ge1xuICAgICdhdWQnOiB0b2tlblJlcXVlc3RVcmwsXG4gICAgJ2V4cCc6ICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC8gMTAwMCkgKyAzNjAwMDAsIC8vIGFkZCBYIGhvdXJzXG4gICAgJ2lzcyc6IGNsaWVudElkLFxuICAgICdqdGknOiB1dWlkLnY0KCksXG4gICAgJ25iZic6ICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC8gMTAwMCkgLSAzNjAwMDAsIC8vIGFkZCAtWCBob3Vyc1xuICAgICdzdWInOiBjbGllbnRJZFxuICB9O1xuXG4gIHZhciBlbmNvZGVkSnd0SGVhZGVyID0gbmV3IEJ1ZmZlcihKU09OLnN0cmluZ2lmeShqd3RIZWFkZXIpKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIHZhciBlbmNvZGVkSnd0UGF5bG9hZCA9IG5ldyBCdWZmZXIoSlNPTi5zdHJpbmdpZnkoand0UGF5bG9hZCkpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgdmFyIHN0cmluZ1RvU2lnbiA9IGVuY29kZWRKd3RIZWFkZXIgKyAnLicgKyBlbmNvZGVkSnd0UGF5bG9hZDtcblxuICAvL3NpZ24gaXQhXG4gIHZhciBzaWduZXIgPSBjcnlwdG8uY3JlYXRlU2lnbignUlNBLVNIQTI1NicpO1xuICBzaWduZXIudXBkYXRlKHN0cmluZ1RvU2lnbik7XG4gIHZhciBlbmNvZGVkU2lnbmVkSnd0SW5mbyA9IHNpZ25lci5zaWduKHByaXZhdGVLZXksICdiYXNlNjQnKTtcblxuICAvL2RlZmluZSBhc3NlcnRpb25cbiAgdmFyIGNsaWVudEFzc2VydGlvbiA9IGVuY29kZWRKd3RIZWFkZXIgKyAnLicgKyBlbmNvZGVkSnd0UGF5bG9hZCArICcuJyArIGVuY29kZWRTaWduZWRKd3RJbmZvO1xuXG4gIHZhciB0b2tlblJlcXVlc3RGb3JtRGF0YSA9IHtcbiAgICBjbGllbnRfaWQ6IGNsaWVudElkLFxuICAgIGNsaWVudF9hc3NlcnRpb25fdHlwZTogJ3VybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlcicsXG4gICAgZ3JhbnRfdHlwZTogJ2NsaWVudF9jcmVkZW50aWFscycsXG4gICAgcmVzb3VyY2U6ICdodHRwczovL291dGxvb2sub2ZmaWNlMzY1LmNvbS8nLFxuICAgIGNsaWVudF9hc3NlcnRpb246IGNsaWVudEFzc2VydGlvblxuICB9O1xuXG4gIHZhciB0b2tlblJlcXVlc3RPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHBvcnQ6IDQ0MyxcbiAgICB1cmk6IHRva2VuUmVxdWVzdFVybCxcbiAgICBmb3JtRGF0YTogdG9rZW5SZXF1ZXN0Rm9ybURhdGEsXG4gIH07XG5cbiAgcmV0dXJuIHJwKHRva2VuUmVxdWVzdE9wdGlvbnMpXG4gIC50aGVuKGZ1bmN0aW9uKGJvZHkpIHtcbiAgICB2YXIgdG9rZW5EYXRhID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICBpZiAodG9rZW5EYXRhICYmIHRva2VuRGF0YS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IHRva2VuRGF0YS5hY2Nlc3NfdG9rZW47XG4gICAgICByZXR1cm4gYWNjZXNzVG9rZW47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnQ291bGQgbm90IGdldCBhY2Nlc3MgdG9rZW4uJyk7XG4gICAgfVxuICB9KVxuICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgdmFyIHRva2VuRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXJyKSk7XG4gICAgaWYgKHRva2VuRGF0YS5uYW1lID09PSAnU3RhdHVzQ29kZUVycm9yJykge1xuICAgICAgdmFyIGVudGlyZU1lc3NhZ2UgPSB0b2tlbkRhdGEubWVzc2FnZTtcbiAgICAgIHZhciBtZXNzYWdlSnNvbiA9IGVudGlyZU1lc3NhZ2UucmVwbGFjZSh0b2tlbkRhdGEuc3RhdHVzQ29kZSArICcgLSAnLCAnJyk7XG4gICAgICB2YXIgbWVzc2FnZURhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2VKc29uLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXFwiJywgJ2cnKSwnXCInKSk7XG4gICAgICAvL2NvbnNvbGUubG9nKCctLS0tLScpO1xuICAgICAgLy9jb25zb2xlLmxvZyhtZXNzYWdlRGF0YSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWVzc2FnZURhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZSA9IGZ1bmN0aW9uKGVtYWlsTWVzc2FnZSwgbWFwcGluZykge1xuICBpZiAobWFwcGluZyA9PT0gJycpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0gZWxzZSBpZiAobWFwcGluZy5pbmRleE9mKCcuJykgPT09IC0xKSB7XG4gICAgcmV0dXJuIGVtYWlsTWVzc2FnZVttYXBwaW5nXTtcbiAgfSBlbHNlIHtcbiAgICAvL2RyaWxsIGludG8gb2JqZWN0IHRvIGdyYWIgdGhlIHZhbHVlIHdlIG5lZWRcbiAgICB2YXIgbmVzdGVkUHJvcGVydHlBcnJheSA9IG1hcHBpbmcuc3BsaXQoJy4nKTtcbiAgICB2YXIgcmV0dXJuVmFsID0gZW1haWxNZXNzYWdlW25lc3RlZFByb3BlcnR5QXJyYXlbMF1dO1xuICAgIGlmIChyZXR1cm5WYWwpIHtcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbmVzdGVkUHJvcGVydHlBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXR1cm5WYWwgPSByZXR1cm5WYWxbbmVzdGVkUHJvcGVydHlBcnJheVtpXV07XG4gICAgICAgIGlmICghcmV0dXJuVmFsKSB7XG4gICAgICAgICAgcmV0dXJuIHJldHVyblZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuVmFsO1xuICB9XG59O1xuXG52YXIgbWFwRW1haWxEYXRhID0gZnVuY3Rpb24oZW1haWxEYXRhKSB7XG4gIHZhciBtYXBwaW5nID0ge1xuICAgICdlbWFpbHMnOiAndmFsdWUnLFxuICAgICdtZXNzYWdlSWQnOiAnSWQnLFxuICAgICdjb252ZXJzYXRpb25JZCc6ICdDb252ZXJzYXRpb25JZCcsXG4gICAgJ2RhdGVUaW1lU2VudCc6ICdEYXRlVGltZVNlbnQnLFxuICAgICdkYXRlVGltZVJlY2VpdmVkJzogJ0RhdGVUaW1lUmVjZWl2ZWQnLFxuICAgICdpbXBvcnRhbmNlJzogJ0ltcG9ydGFuY2UnLFxuICAgICdmb2xkZXJJZCc6ICdQYXJlbnRGb2xkZXJJZCcsXG4gICAgJ2ZvbGRlck5hbWUnOiAnJyxcbiAgICAnY2F0ZWdvcmllcyc6ICdDYXRlZ29yaWVzJyxcbiAgICAnY29udGVudFR5cGUnOiAnQm9keS5Db250ZW50VHlwZScsXG4gICAgJ3N1YmplY3QnOiAnU3ViamVjdCcsXG4gICAgJ2JvZHlQcmV2aWV3JzogJ0JvZHlQcmV2aWV3JyxcbiAgICAnYm9keSc6ICdCb2R5LkNvbnRlbnQnLFxuICAgICdmcm9tQWRkcmVzcyc6ICdGcm9tLkVtYWlsQWRkcmVzcy5BZGRyZXNzJyxcbiAgICAnZnJvbU5hbWUnOiAnRnJvbS5FbWFpbEFkZHJlc3MuTmFtZScsXG4gICAgJ3RvUmVjaXBpZW50cyc6ICdUb1JlY2lwaWVudHMnLFxuICAgICd0b1JlY2lwaWVudEFkZHJlc3MnOiAnRW1haWxBZGRyZXNzLkFkZHJlc3MnLFxuICAgICd0b1JlY2lwaWVudE5hbWUnOiAnRW1haWxBZGRyZXNzLk5hbWUnLFxuICAgICdjY1JlY2lwaWVudHMnOiAnQ2NSZWNpcGllbnRzJyxcbiAgICAnY2NSZWNpcGllbnRBZGRyZXNzJzogJ0VtYWlsQWRkcmVzcy5BZGRyZXNzJyxcbiAgICAnY2NSZWNpcGllbnROYW1lJzogJ0VtYWlsQWRkcmVzcy5OYW1lJyxcbiAgICAnYmNjUmVjaXBpZW50cyc6ICdCY2NSZWNpcGllbnRzJyxcbiAgICAnYmNjUmVjaXBpZW50QWRkcmVzcyc6ICdFbWFpbEFkZHJlc3MuQWRkcmVzcycsXG4gICAgJ2JjY1JlY2lwaWVudE5hbWUnOiAnRW1haWxBZGRyZXNzLk5hbWUnLFxuICAgICdpc0RlbGl2ZXJ5UmVjZWlwdFJlcXVlc3RlZCc6ICdJc0RlbGl2ZXJ5UmVjZWlwdFJlcXVlc3RlZCcsXG4gICAgJ2lzUmVhZFJlY2VpcHRSZXF1ZXN0ZWQnOiAnSXNSZWFkUmVjZWlwdFJlcXVlc3RlZCcsXG4gICAgJ2hhc0F0dGFjaG1lbnRzJzogJ0hhc0F0dGFjaG1lbnRzJyxcbiAgICAnaXNEcmFmdCc6ICdJc0RyYWZ0JyxcbiAgICAnaXNSZWFkJzogJ0lzUmVhZCdcbiAgfTtcblxuICB2YXIgbWFwcGVkRGF0YSA9IFtdO1xuXG4gIGZvciAodmFyIHVzZXJJdGVyID0gMDsgdXNlckl0ZXIgPCBlbWFpbERhdGEubGVuZ3RoOyB1c2VySXRlcisrKSB7XG4gICAgdmFyIG1hcHBlZFVzZXIgPSB7XG4gICAgICBlbWFpbDogZW1haWxEYXRhW3VzZXJJdGVyXS5lbWFpbCxcbiAgICAgIGZpbHRlclN0YXJ0RGF0ZTogZW1haWxEYXRhW3VzZXJJdGVyXS5maWx0ZXJTdGFydERhdGUsXG4gICAgICBmaWx0ZXJFbmREYXRlOiBlbWFpbERhdGFbdXNlckl0ZXJdLmZpbHRlckVuZERhdGUsXG4gICAgICBkYXRhOiBbXSxcbiAgICAgIHN1Y2Nlc3M6IGVtYWlsRGF0YVt1c2VySXRlcl0uc3VjY2VzcyxcbiAgICAgIGVycm9yTWVzc2FnZTogZW1haWxEYXRhW3VzZXJJdGVyXS5lcnJvck1lc3NhZ2VcbiAgICB9O1xuXG4gICAgaWYgKGVtYWlsRGF0YVt1c2VySXRlcl0uc3VjY2Vzcykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbWFpbERhdGFbdXNlckl0ZXJdLmRhdGFbbWFwcGluZy5lbWFpbHNdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbEVtYWlsTWVzc2FnZSA9IGVtYWlsRGF0YVt1c2VySXRlcl0uZGF0YVttYXBwaW5nLmVtYWlsc11baV07XG4gICAgICAgIHZhciBtYXBwZWRFbWFpbE1lc3NhZ2UgPSB7fTtcblxuICAgICAgICAvL2dldCB0b3AtbGV2ZWwgc2NhbGFyc1xuICAgICAgICBtYXBwZWRFbWFpbE1lc3NhZ2UubWVzc2FnZUlkID0gZXh0cmFjdERhdGFGcm9tRW1haWxNZXNzYWdlKG9yaWdpbmFsRW1haWxNZXNzYWdlLCBtYXBwaW5nLm1lc3NhZ2VJZCk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5jb252ZXJzYXRpb25JZCA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5jb252ZXJzYXRpb25JZCk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5kYXRlVGltZVNlbnQgPSBuZXcgRGF0ZShleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2UsIG1hcHBpbmcuZGF0ZVRpbWVTZW50KSk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5kYXRlVGltZVJlY2VpdmVkID0gbmV3IERhdGUoZXh0cmFjdERhdGFGcm9tRW1haWxNZXNzYWdlKG9yaWdpbmFsRW1haWxNZXNzYWdlLCBtYXBwaW5nLmRhdGVUaW1lUmVjZWl2ZWQpKTtcbiAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmltcG9ydGFuY2UgPSBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2UsIG1hcHBpbmcuaW1wb3J0YW5jZSk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5mb2xkZXJJZCA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5mb2xkZXJJZCk7XG4gICAgICAgIC8vbWFwcGVkRW1haWxNZXNzYWdlLmZvbGRlck5hbWUgPSBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2UsIG1hcHBpbmcuZm9sZGVyTmFtZSk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5jYXRlZ29yaWVzID0gZXh0cmFjdERhdGFGcm9tRW1haWxNZXNzYWdlKG9yaWdpbmFsRW1haWxNZXNzYWdlLCBtYXBwaW5nLmNhdGVnb3JpZXMpO1xuICAgICAgICBtYXBwZWRFbWFpbE1lc3NhZ2UuY29udGVudFR5cGUgPSBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2UsIG1hcHBpbmcuY29udGVudFR5cGUpO1xuICAgICAgICBtYXBwZWRFbWFpbE1lc3NhZ2Uuc3ViamVjdCA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5zdWJqZWN0KTtcbiAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmJvZHlQcmV2aWV3ID0gZXh0cmFjdERhdGFGcm9tRW1haWxNZXNzYWdlKG9yaWdpbmFsRW1haWxNZXNzYWdlLCBtYXBwaW5nLmJvZHlQcmV2aWV3KTtcbiAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmJvZHkgPSBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2UsIG1hcHBpbmcuYm9keSk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5pc0RlbGl2ZXJ5UmVjZWlwdFJlcXVlc3RlZCA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5pc0RlbGl2ZXJ5UmVjZWlwdFJlcXVlc3RlZCk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5pc1JlYWRSZWNlaXB0UmVxdWVzdGVkID0gZXh0cmFjdERhdGFGcm9tRW1haWxNZXNzYWdlKG9yaWdpbmFsRW1haWxNZXNzYWdlLCBtYXBwaW5nLmlzUmVhZFJlY2VpcHRSZXF1ZXN0ZWQpO1xuICAgICAgICBtYXBwZWRFbWFpbE1lc3NhZ2UuaGFzQXR0YWNobWVudHMgPSBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2UsIG1hcHBpbmcuaGFzQXR0YWNobWVudHMpO1xuICAgICAgICBtYXBwZWRFbWFpbE1lc3NhZ2UuaXNEcmFmdCA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5pc0RyYWZ0KTtcbiAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmlzUmVhZCA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5pc1JlYWQpO1xuXG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5mcm9tQWRkcmVzcyA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5mcm9tQWRkcmVzcyk7XG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS5mcm9tTmFtZSA9IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZSwgbWFwcGluZy5mcm9tTmFtZSk7XG5cbiAgICAgICAgLy9nZXQgYXJyYXlzXG4gICAgICAgIHZhciBqID0gMDtcblxuICAgICAgICAvL3RvXG4gICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS50b1JlY2lwaWVudHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IG9yaWdpbmFsRW1haWxNZXNzYWdlW21hcHBpbmcudG9SZWNpcGllbnRzXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIG1hcHBlZEVtYWlsTWVzc2FnZS50b1JlY2lwaWVudHMucHVzaCh7XG4gICAgICAgICAgICBhZGRyZXNzOiBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2VbbWFwcGluZy50b1JlY2lwaWVudHNdW2pdLCBtYXBwaW5nLnRvUmVjaXBpZW50QWRkcmVzcyksXG4gICAgICAgICAgICBuYW1lOiBleHRyYWN0RGF0YUZyb21FbWFpbE1lc3NhZ2Uob3JpZ2luYWxFbWFpbE1lc3NhZ2VbbWFwcGluZy50b1JlY2lwaWVudHNdW2pdLCBtYXBwaW5nLnRvUmVjaXBpZW50TmFtZSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vY2NcbiAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmNjUmVjaXBpZW50cyA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgb3JpZ2luYWxFbWFpbE1lc3NhZ2VbbWFwcGluZy5jY1JlY2lwaWVudHNdLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmNjUmVjaXBpZW50cy5wdXNoKHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZVttYXBwaW5nLmNjUmVjaXBpZW50c11bal0sIG1hcHBpbmcuY2NSZWNpcGllbnRBZGRyZXNzKSxcbiAgICAgICAgICAgIG5hbWU6IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZVttYXBwaW5nLmNjUmVjaXBpZW50c11bal0sIG1hcHBpbmcuY2NSZWNpcGllbnROYW1lKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9iY2NcbiAgICAgICAgbWFwcGVkRW1haWxNZXNzYWdlLmJjY1JlY2lwaWVudHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IG9yaWdpbmFsRW1haWxNZXNzYWdlW21hcHBpbmcuYmNjUmVjaXBpZW50c10ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBtYXBwZWRFbWFpbE1lc3NhZ2UuYmNjUmVjaXBpZW50cy5wdXNoKHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGV4dHJhY3REYXRhRnJvbUVtYWlsTWVzc2FnZShvcmlnaW5hbEVtYWlsTWVzc2FnZVttYXBwaW5nLmJjY1JlY2lwaWVudHNdW2pdLCBtYXBwaW5nLmJjY1JlY2lwaWVudEFkZHJlc3MpLFxuICAgICAgICAgICAgbmFtZTogZXh0cmFjdERhdGFGcm9tRW1haWxNZXNzYWdlKG9yaWdpbmFsRW1haWxNZXNzYWdlW21hcHBpbmcuYmNjUmVjaXBpZW50c11bal0sIG1hcHBpbmcuYmNjUmVjaXBpZW50TmFtZSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1hcHBlZFVzZXIuZGF0YS5wdXNoKG1hcHBlZEVtYWlsTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICAgIG1hcHBlZERhdGEucHVzaChtYXBwZWRVc2VyKTtcbiAgfVxuXG4gIHJldHVybiBtYXBwZWREYXRhO1xufTtcblxudmFyIGdldEVtYWlsRGF0YSA9IGZ1bmN0aW9uKGFwaVZlcnNpb24sIGVtYWlscywgZmlsdGVyU3RhcnREYXRlLCBmaWx0ZXJFbmREYXRlLCBhZGRpdGlvbmFsRmllbGRzLCBjbGllbnRJZCwgdGVuYW50SWQsIGNlcnRUaHVtYnByaW50LCBwcml2YXRlS2V5KSB7XG4gIHJldHVybiBnZXRBY2Nlc3NUb2tlbihhcGlWZXJzaW9uLCBjbGllbnRJZCwgdGVuYW50SWQsIGNlcnRUaHVtYnByaW50LCBwcml2YXRlS2V5KVxuICAudGhlbihmdW5jdGlvbihhY2Nlc3NUb2tlbikge1xuICAgIHZhciBlbWFpbFJlc3VsdHMgPSBbXTtcbiAgICB2YXIgZW1haWxSZXN1bHRQcm9taXNlcyA9IFtdO1xuICAgIHZhciBlbWFpbEl0ZXIgPSAwO1xuICAgIGZvciAoZW1haWxJdGVyID0gMDsgZW1haWxJdGVyIDwgZW1haWxzLmxlbmd0aDsgZW1haWxJdGVyKyspIHtcbiAgICAgIGVtYWlsUmVzdWx0c1tlbWFpbEl0ZXJdID0ge2VtYWlsOiBlbWFpbHNbZW1haWxJdGVyXSwgZmlsdGVyU3RhcnREYXRlOiBmaWx0ZXJTdGFydERhdGUsIGZpbHRlckVuZERhdGU6IGZpbHRlckVuZERhdGV9O1xuICAgICAgZW1haWxSZXN1bHRQcm9taXNlcy5wdXNoKGdldFVzZXJFbWFpbHMoYXBpVmVyc2lvbiwgZW1haWxzW2VtYWlsSXRlcl0sIGZpbHRlclN0YXJ0RGF0ZSwgZmlsdGVyRW5kRGF0ZSwgYWRkaXRpb25hbEZpZWxkcywgZW1haWxSZXN1bHRzW2VtYWlsSXRlcl0sIGFjY2Vzc1Rva2VuKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGVtYWlsUmVzdWx0UHJvbWlzZXMpXG4gICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZW1haWxSZXN1bHRzO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbk9mZmljZTM2NUFkYXB0ZXIucHJvdG90eXBlLmdldEJhdGNoRGF0YSA9IGZ1bmN0aW9uKGVtYWlscywgZmlsdGVyU3RhcnREYXRlLCBmaWx0ZXJFbmREYXRlLCBhZGRpdGlvbmFsRmllbGRzKSB7XG4gIHZhciBjbGllbnRJZCA9IHRoaXMuX2NvbmZpZy5jcmVkZW50aWFscy5jbGllbnRJZDtcbiAgdmFyIHRlbmFudElkID0gdGhpcy5fY29uZmlnLmNyZWRlbnRpYWxzLnRlbmFudElkO1xuICB2YXIgY2VydFRodW1icHJpbnQgPSB0aGlzLl9jb25maWcuY3JlZGVudGlhbHMuY2VydGlmaWNhdGVUaHVtYnByaW50O1xuICB2YXIgcHJpdmF0ZUtleSA9IHRoaXMuX2NvbmZpZy5jcmVkZW50aWFscy5jZXJ0aWZpY2F0ZTtcbiAgdmFyIGFwaVZlcnNpb24gPSB0aGlzLl9jb25maWcub3B0aW9ucy5hcGlWZXJzaW9uO1xuXG4gIHZhciBkYXRhQWRhcHRlclJ1blN0YXRzID0ge1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgcnVuRGF0ZTogbW9tZW50KCkudXRjKCkudG9EYXRlKCksXG4gICAgZmlsdGVyU3RhcnREYXRlOiBmaWx0ZXJTdGFydERhdGUsXG4gICAgZmlsdGVyRW5kRGF0ZTogZmlsdGVyRW5kRGF0ZSxcbiAgICBlbWFpbHM6IGVtYWlsc1xuICB9O1xuXG4gIHJldHVybiBnZXRFbWFpbERhdGEoYXBpVmVyc2lvbiwgZW1haWxzLCBmaWx0ZXJTdGFydERhdGUsIGZpbHRlckVuZERhdGUsIGFkZGl0aW9uYWxGaWVsZHMsIGNsaWVudElkLCB0ZW5hbnRJZCwgY2VydFRodW1icHJpbnQsIHByaXZhdGVLZXkpXG4gIC50aGVuKGZ1bmN0aW9uKGVtYWlsRGF0YSkge1xuICAgIHJldHVybiBtYXBFbWFpbERhdGEoZW1haWxEYXRhKTtcbiAgfSlcbiAgLnRoZW4oZnVuY3Rpb24obWFwcGVkRW1haWxEYXRhKSB7XG4gICAgZGF0YUFkYXB0ZXJSdW5TdGF0cy5yZXN1bHRzID0gbWFwcGVkRW1haWxEYXRhO1xuICAgIHJldHVybiBkYXRhQWRhcHRlclJ1blN0YXRzO1xuICB9KVxuICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgZGF0YUFkYXB0ZXJSdW5TdGF0cy5zdWNjZXNzID0gZmFsc2U7XG4gICAgZGF0YUFkYXB0ZXJSdW5TdGF0cy5lcnJvck1lc3NhZ2UgPSBlcnI7XG4gICAgY29uc29sZS5sb2coJ09mZmljZTM2NSBHZXRCYXRjaERhdGEgRXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShlcnIpKTtcbiAgICByZXR1cm4gZGF0YUFkYXB0ZXJSdW5TdGF0cztcbiAgfSk7XG59O1xuXG5PZmZpY2UzNjVBZGFwdGVyLnByb3RvdHlwZS5ydW5Db25uZWN0aW9uVGVzdCA9IGZ1bmN0aW9uKGNvbm5lY3Rpb25EYXRhKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIF90aGlzLl9jb25maWcgPSBuZXcgT2ZmaWNlMzY1LkNvbmZpZ3VyYXRpb24oY29ubmVjdGlvbkRhdGEuY3JlZGVudGlhbHMpO1xuICB2YXIgZmlsdGVyU3RhcnREYXRlID0gbW9tZW50KCkudXRjKCkuc3RhcnRPZignZGF5JykuYWRkKC0xLCAnZGF5cycpLnRvRGF0ZSgpO1xuICB2YXIgZmlsdGVyRW5kRGF0ZSA9IG1vbWVudCgpLnV0YygpLnN0YXJ0T2YoJ2RheScpLnRvRGF0ZSgpO1xuICByZXR1cm4gX3RoaXMuZ2V0QmF0Y2hEYXRhKFtfdGhpcy5fY29uZmlnLmNyZWRlbnRpYWxzLmVtYWlsXSwgZmlsdGVyU3RhcnREYXRlLCBmaWx0ZXJFbmREYXRlLCAnJylcbiAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgIGlmIChkYXRhLnN1Y2Nlc3MgJiYgZGF0YS5yZXN1bHRzWzBdKSB7XG4gICAgICAvL3RvIHNlZSBpZiBpdCByZWFsbHkgd29ya2VkLCB3ZSBuZWVkIHRvIHBhc3MgaW4gdGhlIGZpcnN0IHJlc3VsdFxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICB9KTtcbn07XG4iXX0=
//# sourceMappingURL=../../clAdapters/office365/index.js.map